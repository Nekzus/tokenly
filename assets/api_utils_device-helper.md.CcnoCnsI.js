import{_ as s,c as e,o as a,ag as n}from"./chunks/framework.DkdtSTHb.js";const d=JSON.parse('{"title":"Device Management","description":"","frontmatter":{},"headers":[{"level":2,"title":"Overview","slug":"overview","link":"#overview","children":[]},{"level":2,"title":"Configuration","slug":"configuration","link":"#configuration","children":[]},{"level":2,"title":"Device Fingerprinting","slug":"device-fingerprinting","link":"#device-fingerprinting","children":[]},{"level":2,"title":"Security Features","slug":"security-features","link":"#security-features","children":[]},{"level":2,"title":"Token Verification","slug":"token-verification","link":"#token-verification","children":[]},{"level":2,"title":"Security Analysis","slug":"security-analysis","link":"#security-analysis","children":[]},{"level":2,"title":"Best Practices","slug":"best-practices","link":"#best-practices","children":[]},{"level":2,"title":"Security Considerations","slug":"security-considerations","link":"#security-considerations","children":[]},{"level":2,"title":"Related","slug":"related","link":"#related","children":[]}],"relativePath":"api/utils/device-helper.md","filePath":"api/utils/device-helper.md","lastUpdated":1743281625000}'),t={name:"api/utils/device-helper.md"};function l(r,i,p,h,k,c){return a(),e("div",null,i[0]||(i[0]=[n(`<h1 id="device-management" tabindex="-1">Device Management <a class="header-anchor" href="#device-management" aria-label="Permalink to &quot;Device Management&quot;">​</a></h1><p>Device management is built into Tokenly&#39;s core token system, providing automatic device tracking and security features through token fingerprinting.</p><div class="tip custom-block"><p class="custom-block-title">What is Device Fingerprinting?</p><p>Device fingerprinting is a technique that helps identify and track devices through their unique characteristics, strengthening token-based authentication systems.</p></div><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>Device tracking is handled automatically through token fingerprinting when generating tokens. Each token includes a secure device fingerprint that helps identify and validate devices during authentication.</p><h2 id="configuration" tabindex="-1">Configuration <a class="header-anchor" href="#configuration" aria-label="Permalink to &quot;Configuration&quot;">​</a></h2><p>Configure device management through the <code>securityConfig</code> options when initializing Tokenly:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Tokenly } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;tokenly&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> tokenly</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Tokenly</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  securityConfig: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    enableFingerprint: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Enable device fingerprinting (default: true)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    enableBlacklist: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Enable token blacklisting (default: true)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    maxDevices: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,              </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Maximum devices per user (default: 5)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    revokeOnSecurityBreach: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // Auto-revoke on security issues (default: true)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h2 id="device-fingerprinting" tabindex="-1">Device Fingerprinting <a class="header-anchor" href="#device-fingerprinting" aria-label="Permalink to &quot;Device Fingerprinting&quot;">​</a></h2><p>Device fingerprints are automatically generated when creating tokens if you provide the context:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> token</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tokenly.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">generateAccessToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(payload, options, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  userAgent: request.headers[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;user-agent&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ip: request.ip</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// The token payload will include a device fingerprint</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(token.payload)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* Output:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  userId: &quot;123&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  fingerprint: &quot;a1b2c3...&quot;, // Secure device fingerprint</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  iat: &quot;2024-03-21T...&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  exp: &quot;2024-03-21T...&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">*/</span></span></code></pre></div><h2 id="security-features" tabindex="-1">Security Features <a class="header-anchor" href="#security-features" aria-label="Permalink to &quot;Security Features&quot;">​</a></h2><p>The device management system provides:</p><ul><li>Automatic device fingerprinting</li><li>Device limits per user (default: 5 devices)</li><li>Token blacklisting</li><li>Automatic token revocation on security breaches</li><li>Device validation during token verification</li></ul><h2 id="token-verification" tabindex="-1">Token Verification <a class="header-anchor" href="#token-verification" aria-label="Permalink to &quot;Token Verification&quot;">​</a></h2><p>Device validation happens automatically during token verification:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Verify token with device context</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> verified</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tokenly.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">verifyAccessToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(token, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  userAgent: request.headers[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;user-agent&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ip: request.ip</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Throws error if device fingerprint doesn&#39;t match</span></span></code></pre></div><h2 id="security-analysis" tabindex="-1">Security Analysis <a class="header-anchor" href="#security-analysis" aria-label="Permalink to &quot;Security Analysis&quot;">​</a></h2><p>You can analyze token security including device fingerprint status:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> analysis</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tokenly.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">analyzeTokenSecurity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(token)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(analysis)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* Output:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  algorithm: &quot;HS512&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  hasFingerprint: true,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  expirationTime: Date,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  issuedAt: Date,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  timeUntilExpiry: number,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  strength: &quot;strong&quot; | &quot;medium&quot; | &quot;weak&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">*/</span></span></code></pre></div><h2 id="best-practices" tabindex="-1">Best Practices <a class="header-anchor" href="#best-practices" aria-label="Permalink to &quot;Best Practices&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">Best Practices</p><ol><li>Always provide device context when generating tokens</li><li>Keep default security settings enabled</li><li>Use the built-in device limits</li><li>Implement proper error handling for device-related errors</li><li>Monitor token security analysis results</li></ol></div><h2 id="security-considerations" tabindex="-1">Security Considerations <a class="header-anchor" href="#security-considerations" aria-label="Permalink to &quot;Security Considerations&quot;">​</a></h2><div class="warning custom-block"><p class="custom-block-title">Security Notes</p><ul><li>Device fingerprints are one-way hashes and cannot be reversed</li><li>Fingerprints may change if user agent or IP changes</li><li>Maximum device limits help prevent token abuse</li><li>Token revocation is automatic on security breaches when enabled</li></ul></div><h2 id="related" tabindex="-1">Related <a class="header-anchor" href="#related" aria-label="Permalink to &quot;Related&quot;">​</a></h2><div class="vp-doc"><div class="custom-block info"><p> 📚 <a href="/guide/security">Security Guide</a><br> 🔄 <a href="/guide/token-rotation">Token Rotation</a><br> 🌐 <a href="/api/utils/ip-helper">IP Helper</a></p></div></div>`,26)]))}const g=s(t,[["render",l]]);export{d as __pageData,g as default};
